<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head th:replace="fragments/common-head :: common-head">
    </head>
<body>
    <h1>Linea de reparacion</h1>
    <div th:replace="fragments/navbar :: navbar"></div>
    <div class="container">
        <a th:href="@{/lineas/linea-add}" class="btn btn-primary">Añadir Linea</a>
<!-- 
        <form>
            <div class="form-row">
                <div class="form-group col-md-4">
                    <label for="userFilter">Buscar por Usuario</label>
                    <select class="form-control" id="userFilter" name="userFilter">
                        <option value="" selected>Seleccione un usuario</option>
                        <option th:each="user : ${users}" th:value="${user.id}" th:text="${user.userName}"></option>
                    </select>
                </div>
                <div class="form-group col-md-4">
                    <label for="bikeFilter">Buscar por Vehiculo</label>
                    <select class="form-control" id="bikeFilter" name="bikeFilter">
                        <option value="" selected>Seleccione una vehiculo</option>
                        <option th:each="bike : ${vehiculos}" th:value="${bike.id}" th:text="${bike.marca} + ' ' + ${bike.modelo}"></option>
                    </select>
                </div>
            </div>
        </form>
-->        
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Reparacion</th>
                    <th>Descripcion</th>
                    <th>Importe</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="reparacion : ${reparaciones}">
                    <td th:text="${linea.id}"></td>
                    <td th:text="${linea.reparacion.id} + ' ' + ${linea.reparacion.id}"></td>
                    <td th:text="${linea.descripcion}"></td>
                    <td th:text="${linea.importe}"></td>
                     <!-- Columna para el botón Editar -->
                    <td>
                        <a th:href="@{'/lineas/edit/' + ${linea.id}}" class="btn btn-primary">Editar</a>
                    </td>
                    <!-- Columna para el botón Eliminar -->
                    <td>
                        <form th:action="@{'/lineas/delete/' + ${linea.id}}" method="post">
                            <input type="hidden" name="_method" value="delete" />
                            <button type="submit" class="btn btn-danger">Eliminar</button>
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <script>
        /*
        $(document).ready(function () {
            $('#userFilter').change(function () {
                filterReparaciones();
            });

            $('#bikeFilter').change(function () {
                filterReparaciones();
            });

            function filterReparaciones() {
                var userFilter = $('#userFilter').val();
                var bikeFilter = $('#bikeFilter').val();
                var url = '/reparaciones/listado-repairs';

                if (userFilter !== '' || bikeFilter !== '') {
                    url += '?';

                    if (userFilter !== '') {
                        url += 'userFilter=' + userFilter;
                    }

                    if (bikeFilter !== '') {
                        if (userFilter !== '') {
                            url += '&';
                        }
                        url += 'bikeFilter=' + bikeFilter;
                    }
                }

                window.location.href = url;
            }
        });
        */
    </script>

</body>
</html>
